name = "blog"
main = "fixtures/worker.js"
compatibility_date = "2024-12-01"

[assets]
directory = "./static"

[[d1_databases]]
binding = "BLOG_DB"
database_name = "blog-db"

# KV namespace for WebAuthn credentials and challenges
# Create with: wrangler kv:namespace create "ADMIN_AUTH"
[[kv_namespaces]]
binding = "ADMIN_AUTH"
id = "YOUR_KV_NAMESPACE_ID"

[env.local]
d1_databases = [
  { binding = "BLOG_DB", database_name = "blog-db", database_id = "local-blog-db" }
]

# WebAuthn Relying Party configuration
[env.production.vars]
RP_ID = "your-domain.com"
RP_ORIGIN = "https://your-domain.com"
RP_NAME = "Your Site Name"

[env.production]
routes = [
  { pattern = "your-domain.com", zone_name = "your-domain.com", custom_domain = true }
]

[[env.production.kv_namespaces]]
binding = "ADMIN_AUTH"
id = "YOUR_KV_NAMESPACE_ID"

[[env.production.d1_databases]]
binding = "BLOG_DB"
database_name = "blog-db"
